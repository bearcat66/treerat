{"version":3,"sources":["UserInfo.js","MB.js","core/navbar_helpers/ButtonList.js","core/NavBar.js","Home.js","styles/place_style.js","Place.js","ReviewForm.js","Submit.js","ReviewTable.js","Browse.js","Search.js","Redeem.js","Profile.js","App.js","Login.js","serviceWorker.js","index.js"],"names":["UserInfo","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","id","name","balance","paymail","avatarUrl","_this2","userInfo","then","r","setState","react_default","a","createElement","className","href","onClick","onUserClick","title","src","React","Component","MB_OAUTH_ID","process","GetMBToken","_GetMBToken","apply","arguments","_callee","mbclient","_ref","moneyButtonId","regenerator_default","wrap","_context","prev","next","MoneyButtonClient","requestAuthorization","handleAuthorizationResponse","t0","console","error","getIdentity","sent","abrupt","stop","LogOutOfMB","_LogOutOfMB","_callee2","_context2","logOut","window","location","reload","IsLoggedIn","_IsLoggedIn","_callee3","log","_context3","isLoggedIn","GetMBUser","_GetMBUser","_callee4","mbclient2","user","_context4","ButtonList","links","map","item","key","handleClick","bind","assertThisInitialized","navLocation","navFunction","NavBar","loggedIn","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","navbar_helpers_ButtonList","navLocations","UserInfo_UserInfo","getMBInfo","identity","profile","bal","getValidAccessToken","getUserProfile","getBalance","amount","primaryPaymail","run","Jigs","RunInstance","Run","Home","pubkey","moneyButtonID","showSpinner","userReviews","userLocations","userTokens","topReviewers","userLoaded","userDoesNotExist","topReviewersLoaded","loadUserItems","Table","striped","bordered","variant","text-center","renderTopReviewersData","class","account","index","reputation","_this3","loadTopReviewers","activate","sync","userdb","owner","jigs","find","x","constructor","userEntries","entries","value","userRunInstance","network","privKey","purse","tokens","i","length","push","sort","b","slice","fetch","res","status","_this4","json","reviews","locations","renderSpinner","renderPlaceHolder","renderUserItems","renderTopReviewers","PlaceStyle","position","width","height","left","top","border","borderRadius","backgroundColor","textAlign","color","fontSize","fontWeight","padding","PlaceStyleHover","_objectSpread","K_HEIGHT","K_WIDTH","Place","placeDescription","hover","$hover","style","MY_API_KEY","Review","Location","AllLocations","ReviewForm","handleSubmit","handleSelectSuggest","handleNoResult","handleStatusUpdatStatusUpdatee","handleStatusUpdate","handleLocationChange","handleLocationTypeChange","handleReviewBodyChange","handleReviewRatingChange","handleFormChange","closeModal","badInput","body","search","placeID","address","rating","moneyButtonName","reviewTx","coords","lat","lng","renderMap","submitted","renderMB","validForm","renderSuccessModal","Modal","Dialog","Header","closeButton","Title","Body","Footer","Button","event","preventDefault","headers","Content-Type","method","JSON","stringify","locationName","reviewBody","userID","rev","disabled","e","target","geocodedPrediction","originalPrediction","geometry","description","formatted_address","place_id","justifyContent","alignItems","lib_default","bootstrapURLKeys","center","defaultZoom","Place_Place","onSubmit","onChange","es","params","libraries","render","googleMaps","react_google_places_suggest_es","autocompletionRequest","input","onNoResult","onSelectSuggest","onStatusUpdate","textNoResults","customRender","prediction","autoComplete","placeholder","required","rows","min","max","step","onInput","renderSubmitButton","renderForm","renderSubmissionModal","renderPlaceMap","Submit","ReviewForm_ReviewForm","ReviewTable","upvoteReview","renderVoteModal","prevProps","review","size","origin","index_es","to","currency","Jumbotron","fluid","renderTableData","Browse","_React$Component","handleMapClick","showMap","places","inherits","createClass","getAllPlaces","ReviewTable_ReviewTable","zoom","latitude","longitude","revs","c","defaultCenter","onChildClick","hoverDistance","loadPlaces","renderReviewTable","l","geolocated","positionOptions","enableHighAccuracy","userDecisionTimeout","Search","handleInputChange","handleClaimSubmit","transferLocation","reviewList","locationSelected","renderModal","businessID","renderClaimBusinessButton","renderClaimModal","Redeem","handleRedeemSubmit","handleRedeemCodeChange","handleBusinessIDChange","redeemCode","renderReviewForm","renderRedeemForm","invalidRedemptionCode","code","dryRun","red","redeemed","catch","renderRedeemSubmitButton","renderRedeemErrorMessage","Profile","getUserDone","businessLocations","getUserInformation","businessAccount","styles","points","renderUserInfo","renderUserReviews","renderBusinessAccount","App","showPage","navigate","newPage","core_NavBar","src_Home","src_Submit","src_Browse","Search_Search","Redeem_Redeem","Profile_Profile","Login","UserDB","onPaymentSuccessUser","onPaymentSuccessBusiness","renderUserRegistration","redirect","handleAuth","u","getUser","react_router","payment","createUser","label","onPayment","_this5","renderRedirect","Boolean","hostname","match","ReactDOM","react_router_dom","path","exact","component","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bfe23f38.chunk.js","sourcesContent":["import React from 'react';\nimport {Navbar} from 'react-bootstrap'\n\nexport default class UserInfo extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        id: '',\n        name: '',\n        balance: '',\n        paymail: '',\n\tavatarUrl: ''\n      };\n    }\n    componentDidMount() {\n      this.props.userInfo.then(r => {\n        this.setState({id: r.id, name: r.name, balance: r.balance, paymail: r.paymail, avatarUrl: r.avatarUrl})\n      })\n    }\n    render() {\n      if (this.state.id === '') {\n        return null\n      }\n      return (\n        <div className=\"justify-content-end\">\n          <a href='#' onClick={this.props.onUserClick} className=\"navbar-collapse collapse\" title={this.state.name}>\n\t    {this.state.name}   <img className=\"navbar-expand-sm avatar-small\" src={this.state.avatarUrl} />\n\t  </a>\n        </div>\n        );\n    }\n}\n\n","import {MoneyButtonClient} from '@moneybutton/api-client'\n\nconst MB_OAUTH_ID = process.env.REACT_APP_MBOAUTHID\n\nexport async function GetMBToken() {\n  var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n  try {\n    mbclient.requestAuthorization(\n      'auth.user_identity:read users.profiles:read users.balance:read',\n      'http://localhost:3000/login'\n    )\n    await mbclient.handleAuthorizationResponse()\n  } catch (err) {\n    console.error(err)\n  }\n  const { id: moneyButtonId } = await mbclient.getIdentity()\n  return moneyButtonId\n}\n\nexport async function LogOutOfMB() {\n  var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n  try {\n    await mbclient.logOut()\n    window.location.reload()\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nexport async function IsLoggedIn() {\n  var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n  try {\n    var log = await mbclient.isLoggedIn()\n    return log\n  } catch (err) {\n    console.error(err)\n  }\n  return false\n}\n\nexport async function GetMBUser() {\n  var mbclient2 = new MoneyButtonClient(MB_OAUTH_ID)\n  var user = await mbclient2.getIdentity()\n  return user\n}\n\n","import React, { Component } from 'react';\n\nclass ButtonList extends Component {\n  constructor(props) {\n    super(props);\n    this.state={};\n    this.links = this.props.links.map((item, key) =>\n      <li key={key} className=\"nav-item\"><button className='btn btn-link nav-link' onClick={() => this.handleClick(key)}>{item.title}</button></li>\n    );\n\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick(key) {\n    var navLocation = this.props.links[key].navLocation;\n    this.props.navFunction(navLocation);\n  }\n\n\n  render() {\n    return(  \n        <ul className=\"navbar-nav mr-auto\">\n          {this.links}\n        </ul>\n    )\n  }\n\n}\n\nexport default ButtonList\n","import React, {Component} from 'react';\nimport UserInfo from '../UserInfo'\nimport {MoneyButtonClient} from '@moneybutton/api-client'\nimport {GetMBToken, LogOutOfMB, IsLoggedIn} from '../MB'\nimport ButtonList from './navbar_helpers/ButtonList';\nconst MB_OAUTH_ID = process.env.REACT_APP_MBOAUTHID\n\nclass NavBar extends Component {\n  constructor(props) {\n    super (props)\n    this.state = {\n      loggedIn: false\n    }\n  }\n  componentDidMount() {\n    IsLoggedIn().then(r => {\n      this.setState({loggedIn: r});\n    })\n  }\n\n  render() {\n    return (\n      <nav className=\"navbar navbar-light bg-light navbar-expand-lg\">\n\t      <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarContent\" aria-controls=\"navbarContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <i className=\"material-icons\">list</i>\n        </button>\n        <a className=\"navbar-brand\" href=\"/\">True Reviews</a>\n        <div className=\"collapse navbar-collapse\" id=\"navbarContent\">\n          <ButtonList links={this.props.navLocations} navFunction={this.props.navFunction} />\n        </div>\n        <UserInfo onUserClick={this.props.onUserClick} userInfo={getMBInfo()}/>\n        <ul/>\n        {!this.state.loggedIn ? <button className=\"btn btn-link\" onClick={GetMBToken}>Login in with MB</button> : null }\n\t      {this.state.loggedIn ? <button className=\"btn btn-link\" onClick={LogOutOfMB}>Log Out</button> : null }\n      </nav>\n    );\n  }\n}\n\nexport default NavBar\n\nasync function getMBInfo() {\n  var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n  var identity = await mbclient.getIdentity()\n  await mbclient.getValidAccessToken()\n  var profile = await mbclient.getUserProfile(identity.id)\n  console.log(profile)\n  var bal = await mbclient.getBalance(identity.id)\n  console.log(bal)\n  return {id: identity.id, name: identity.name, balance: bal.amount, paymail: profile.primaryPaymail, avatarUrl: profile.avatarUrl}\n}\n","import React, {Component} from 'react';\nimport {GetMBUser} from './MB';\nimport {Button, Table} from 'react-bootstrap';\nimport {MoneyButtonClient} from '@moneybutton/api-client'\nconst run = window.Jigs.RunInstance\nconst Run = window.Run\nconst PURSE_PRIVKEY = 'Kyt9WKt8XTymzwyQcwQeWtpEoELNHgkiwwbCFuBBHLWVPrjo7xBV'\nconst MB_OAUTH_ID = process.env.REACT_APP_MBOAUTHID\n\nclass Home extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      pubkey: '',\n      moneyButtonID: '',\n      showSpinner: true,\n      userReviews: [],\n      userLocations: [],\n      userTokens: 0,\n      topReviewers: [],\n      userLoaded: false,\n      userDoesNotExist: false,\n      topReviewersLoaded: false,\n    }\n  }\n  componentDidMount() {\n    GetMBUser().then(r=> {\n      this.setState({moneyButtonID: r.id, showSpinner: false})\n    })\n    this.loadUserItems().then(r=> {\n      this.setState({userLoaded: true})\n    })\n\n  }\n  renderSpinner() {\n    if (this.state.showSpinner) {\n      return (\n        <div className=\"container text-center\">\n          <p>Loading User Information...</p>\n          <div className=\"spinner-grow\"/>\n        </div>\n      )\n    }\n    return null\n  }\n  renderPlaceHolder() {\n    if (this.state.showSpinner) {\n      return null\n    }\n    return (\n      <div className=\"container text-center\">\n        <h1>True Reviews</h1>\n        <p>The place for high-quality reviews!</p>\n      </div>\n    )\n  }\n  renderTopReviewers() {\n    if (!this.state.topReviewersLoaded) {\n      return (\n        <div class=\"text-center\">\n          <p>Loading top reviewers...</p>\n          <div className=\"spinner-grow\">\n            <span className=\"sr-only\">Loading...</span>\n          </div>\n        </div>\n      )\n    }\n    return (\n      <div className=\"container text-center\">\n        <h2>Top True Reviewers!</h2>\n        <Table striped bordered variant=\"dark\">\n          <thead>\n            <tr>\n              <th text-center=\"true\">User</th>\n              <th text-center=\"true\">Reputation</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderTopReviewersData()}\n          </tbody>\n        </Table>\n      </div>\n    )\n  }\n  renderTopReviewersData() {\n    return this.state.topReviewers.map((account, index) => {\n      return (\n        <tr>\n          <td>{account.user}</td>\n          <td>{account.reputation}</td>\n        </tr>\n      )\n    })\n  }\n  getTopReviewers() {\n    if (this.state.moneyButtonID === '' || this.state.userLoaded === false || this.state.topReviewersLoaded === true) {\n      return\n    }\n    this.loadTopReviewers().then(r => {\n      if (r == null) {\n        return\n      }\n      this.setState({topReviewers: r, topReviewersLoaded: true})\n    })\n  }\n  async loadTopReviewers() {\n    run.activate()\n    await run.sync()\n    var userdb = run.owner.jigs.find(x => x.constructor.name === 'UserDB')\n    if (userdb == null) {\n      return null\n    }\n    var userEntries = Object.entries(userdb)\n    var topReviewers = []\n    for (var [key, value] of userEntries) {\n      if (key === 'owner' || key === 'satoshis' || key === 'location' || key === 'origin') {\n        continue\n      }\n      var userRunInstance = new Run({\n        network: 'main',\n        owner: value.privKey,\n        purse: PURSE_PRIVKEY,\n      })\n      userRunInstance.activate()\n      await userRunInstance.sync()\n      var tokens = 0\n      var jigs = userRunInstance.owner.jigs\n      for (var i=0; i<jigs.length; i++) {\n        if (jigs[i].constructor.name === 'TrueReviewToken') {\n          tokens += jigs[i].amount\n        }\n      }\n      var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n      var profile = await mbclient.getUserProfile(key)\n      console.log(profile)\n      topReviewers.push({user: profile.name, reputation: tokens})\n    }\n    topReviewers.sort(function(a,b){return b.reputation - a.reputation})\n    return topReviewers.slice(0, 3)\n  }\n  renderUserItems() {\n    console.log('here: ' + this.state.userDoesNotExist)\n    if (this.state.moneyButtonID === '' || this.state.userDoesNotExist) {\n      return null\n    }\n    if (!this.state.userLoaded) {\n      return (\n        <div class=\"text-center\">\n          <p>Loading user stats...</p>\n          <div className=\"spinner-grow\">\n            <span className=\"sr-only\">Loading...</span>\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"container text-center\">\n        <h2>Your True Review Statistics</h2>\n        <h3>Review Count: {this.state.userReviews.length}</h3>\n        <h3>Location Count: {this.state.userLocations.length}</h3>\n        <h3>Reputation: {this.state.userTokens}</h3>\n      </div>\n    )\n  }\n  async loadUserItems() {\n    if (!this.state.userLoaded) {\n      return null\n    }\n    console.log('loading user items')\n    fetch('/users/' + this.state.moneyButtonID).then(res=> {\n      console.log(res.status)\n      if (res.status === 404) {\n        this.setState({userDoesNotExist: true, userLoaded: true})\n        console.log(this.state.userDoesNotExist)\n        return\n      }\n      res.json()\n    }).then(userInfo =>this.setState({userReviews: userInfo.reviews, userLocations: userInfo.locations, userTokens: userInfo.tokens, userLoaded: true}))\n  }\n\n  render() {\n    return(\n      <div className=\"jumbotron jumbotron-fluid tr-brand-jumbotron\">\n        {this.renderSpinner()}\n        <div className=\"container\">\n          <div className=\"row\">\n            {this.renderPlaceHolder()}\n          </div>\n          <hr/>\n          <div className=\"row\">\n            <div className=\"col\">\n              {this.renderUserItems()}\n            </div>\n            <div className=\"col\">\n              {this.renderTopReviewers()}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home\n\n","const K_WIDTH = 20;\nconst K_HEIGHT = 20;\n\nconst PlaceStyle = {\n  // initially any map object has left top corner at lat lng coordinates\n  // it's on you to set object origin to 0,0 coordinates\n  position: 'absolute',\n  width: K_WIDTH,\n  height: K_HEIGHT,\n  left: -K_WIDTH / 2,\n  top: -K_HEIGHT / 2,\n\n  border: '5px solid red',\n  borderRadius: K_HEIGHT,\n  backgroundColor: 'white',\n  textAlign: 'center',\n  color: 'red',\n  fontSize: 11,\n  fontWeight: 'bold',\n  padding: 4\n};\nconst PlaceStyleHover = {\n  ...PlaceStyle,\n  border: '5px solid blue',\n  borderRadius: K_HEIGHT *5,\n  width: K_WIDTH * 5,\n  height: K_HEIGHT * 5,\n  padding: 12,\n};\n\nexport {PlaceStyle, PlaceStyleHover};\n","import React from 'react';\nimport {PlaceStyle, PlaceStyleHover} from './styles/place_style.js'\n \n\nexport default class Place extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      placeDescription: props.name,\n      hover: props.$hover,\n    }\n  }\n  componentDidMount() {\n    this.setState({hover: this.props.$hover})\n  }\n  componentDidUpdate() {\n    if (this.state.hover === this.props.$hover) {\n      return\n    }\n    this.setState({hover: this.props.$hover})\n  }\n  render() {\n    const style = this.state.hover ? PlaceStyleHover : PlaceStyle\n    if (this.state.placeDescription === null) {\n      return null\n    }\n    var name = this.state.placeDescription\n    if (style === PlaceStyle) {\n      name = ''\n    }\n    return (\n      <div style={style}>\n        {name}\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport {GetMBUser} from './MB';\n//import MoneyButton from '@moneybutton/react-money-button'\nimport {Button, Modal} from 'react-bootstrap'\nimport GoogleMap from 'google-map-react'\nimport Place from './Place';\nimport GoogleMapLoader from 'react-google-maps-loader'\nimport GooglePlacesSuggest from 'react-google-places-suggest'\nconst Review = window.Jigs.Review\nconst Location = window.Jigs.Location\nconst AllLocations = window.Jigs.AllLocations\n//const UserDB = window.Jigs.UserDB\n\n\n//const Run = window.Run\nconst run = window.Jigs.RunInstance\n\n\n\n\nconst MY_API_KEY = process.env.REACT_APP_GOOGLE_API_KEY\n\n\n\nexport default class ReviewForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleSelectSuggest = this.handleSelectSuggest.bind(this)\n    this.handleNoResult = this.handleNoResult.bind(this)\n    this.handleStatusUpdatStatusUpdatee = this.handleStatusUpdate.bind(this)\n    this.handleLocationChange = this.handleLocationChange.bind(this)\n    this.handleLocationTypeChange = this.handleLocationTypeChange.bind(this)\n    this.handleReviewBodyChange = this.handleReviewBodyChange.bind(this)\n    this.handleReviewRatingChange = this.handleReviewRatingChange.bind(this)\n    this.handleFormChange = this.handleFormChange.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    \n\n    this.state = {\n      badInput: false,\n      type: '',\n      name: '',\n      body: '',\n      search: '',\n      placeID: '',\n      placeDescription: '',\n      address: '',\n      rating: '',\n      moneyButtonID: '',\n      moneyButtonName: '',\n      reviewTx: '',\n      coords: {lat: 59.93, lng: 30.33},\n      renderMap: false,\n      submitted: false,\n      renderMB: false,\n      validForm: false,\n      renderSuccessModal: false,\n    };\n  }\n\n  closeModal() {\n    this.setState({renderSuccessModal: false})\n  }\n\n  renderSubmissionModal() {\n    if (this.state.renderSuccessModal === false) {\n      return null\n    }\n    return (\n      <Modal.Dialog>\n        <Modal.Header closeButton>\n          <Modal.Title>Successfully created a review!</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <p>Congratulations! You have earned 1 reputation point. Thanks for reviewing {this.state.placeDescription}</p>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button onClick={this.closeModal} variant=\"secondary\">Close</Button>\n          <Button variant=\"primary\">View Review</Button>\n        </Modal.Footer>\n      </Modal.Dialog>\n    )\n  }\n\n  async handleSubmit(event) { \n    event.preventDefault();\n    fetch('/review/'+this.state.placeID, {\n      headers: {'Content-Type': 'application/json'},\n      method: 'post',\n      body: JSON.stringify({\n        locationName: this.state.placeDescription,\n        coords: this.state.coords,\n        reviewBody: this.state.body,\n        rating: this.state.rating,\n        userID: this.state.moneyButtonID\n      })\n    }).then(res => res.json()).then(rev =>  {\n      this.setState({renderSuccessModal: true})\n      console.log(rev)\n    })\n  }\n\n  renderSubmitButton(){\n    console.log(this.state.moneyButtonID)\n    if (this.state.moneyButtonID === '' || this.state.badInput) {\n      return (\n        <Button variant=\"primary\" type=\"submit\" disabled>Submit Review</Button>\n      )\n    }\n    return (\n      <Button variant=\"primary\" type=\"submit\">Submit Review</Button>\n    )\n  }\n\n  componentDidMount() {\n    GetMBUser().then(r=> {\n      this.setState({moneyButtonID: r.id, moneyButtonName: r.name})\n    })\n  }\n\n  //handle changes to the form entered by the user\n  handleLocationChange(e) {\n      this.setState({search: e.target.value, address: e.target.value, placeDescription: e.target.value})\n  }\n\n  handleLocationTypeChange(event) {\n    this.setState({type: event.target.value})\n  }\n \n  handleReviewBodyChange(event) {\n    this.setState({body: event.target.value});\n  }\n\n  handleReviewRatingChange(event) {\n    event.preventDefault()\n    console.log(event.target.value)\n    this.setState({rating: event.target.value})\n    console.log(this.state)\n    console.log(this.state.rating === '')\n\n  }\n\n  handleFormChange(event) {\n    if (this.state.placeID === '' || this.state.body === '', this.state.rating === '') {\n      this.setState({renderMB: false, validForm: false})\n    }\n    else {\n      this.setState({renderMB: true, validForm: true})\n    }\n  }\n\n  handleSelectSuggest(geocodedPrediction, originalPrediction) {\n    this.setState({badInput: false})\n    this.setState({renderMap: true})\n    this.setState({\n      coords: {\n        lat: geocodedPrediction.geometry.location.lat(),\n        lng: geocodedPrediction.geometry.location.lng(),\n      }\n    })\n    console.log(originalPrediction.description)\n    this.setState({search: '', address: geocodedPrediction.formatted_address, placeID: geocodedPrediction.place_id, placeDescription: originalPrediction.description})\n  }\n  \n  handleNoResult() {\n    this.setState({badInput: true})\n    console.log('No results for ', this.state.search)\n  }\n  renderPlaceMap() {\n\n  if (!this.state.renderMap) {\n      return null\n    }\n    var zoom = 14\n    return (\n      <div className=\"container text-center\" style={{ height: '50vh', width: '50%' , justifyContent: 'center', alignItems: 'center'}}>\n        <GoogleMap\n          bootstrapURLKeys={{key: MY_API_KEY}}\n          center={this.state.coords}\n          defaultZoom={zoom} >\n          <Place lat={this.state.coords.lat} lng={this.state.coords.lng} name={this.state.placeDescription}/>\n        </GoogleMap>\n      </div>\n    )\n  }\n\n  renderForm() {\n    if (this.state.renderSuccessModal) {\n      return null\n    }\n    return (\n          <form onSubmit={this.handleSubmit} onChange={this.handleFormChange}>\n            <div className=\"form-group\" id=\"reviewFormLocation\">\n              <label>Location to Review</label>\n              <GoogleMapLoader\n                params={{\n                  key: MY_API_KEY,\n                  libraries: \"places,geocode\",\n                }}\n                render={googleMaps =>\n                  googleMaps && (\n                      <GooglePlacesSuggest\n                          googleMaps={googleMaps}\n                          autocompletionRequest={{\n                              input: this.state.search,\n                              // Optional options\n                              // https://developers.google.com/maps/documentation/javascript/reference?hl=fr#AutocompletionRequest\n                          }}\n                          // Optional props\n                          onNoResult={this.handleNoResult}\n                          onSelectSuggest={this.handleSelectSuggest}\n                          onStatusUpdate={this.handleStatusUpdate}\n                          textNoResults='Did not find any matching locations' // null or  if you want to disable the no results item\n                          customRender={prediction => (\n                            <div className=\"customWrapper\">\n                              {prediction\n                                ? prediction.description\n                                : \"Did not find any matching locations\"}\n                            </div>\n                          )}\n                      >\n                          <input className=\"form-control\"\n                              type='text'\n                              autoComplete='off'\n                              value={this.state.placeDescription}\n                              placeholder='Search a location'\n                              onChange={this.handleLocationChange}\n                              required\n                          />\n\n                      </GooglePlacesSuggest>\n                    )\n                }\n              />\n            </div>\n      <div className=\"form-group\" id=\"reviewFormBody\">\n        <label>Review Body</label>\n        <textarea className=\"form-control\" rows=\"3\" onChange={this.handleReviewBodyChange} required/>\n      </div>\n      <div className=\"form-group\" id=\"reviewFormRating\">\n        <label>Rating</label>\n        <input className=\"form-control\" type=\"number\" min=\"0\" max=\"10\" step=\".1\" onInput={this.handleReviewRatingChange}  required/>\n      </div>\n      {this.renderSubmitButton()}\n    </form>\n    )\n  }\n  handleStatusUpdate(status) {\n    console.log(status)\n  }\n  render() {\n      return (\n        <div>\n          <div>\n            {this.renderForm()}\n            {this.renderSubmissionModal()}\n          </div>           \n          {this.renderPlaceMap()}\n        </div>\n      );\n  }\n}\n\n\n","import React from 'react';\nimport ReviewForm from './ReviewForm'\n\nfunction Submit() {\n  return (\n    <div className=\"jumbotron jumbotron-transparent-25\">    \n      <ReviewForm/>\n    </div>\n  );\n}\n\nexport default Submit;\n","import React from 'react';\nimport MoneyButton from '@moneybutton/react-money-button'\nimport {Button, Jumbotron, Table} from 'react-bootstrap'\nconst run = window.Jigs.RunInstance\n\nexport default class ReviewTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.upvoteReview = this.upvoteReview.bind(this)\n    this.state = {\n      reviews: [],\n      renderVoteModal: false\n    };\n  }\n  componentDidMount() {\n    this.props.reviews.then(r => {\n      this.setState({reviews: r})\n    })\n  }\n  componentDidUpdate(prevProps) {\n    this.props.reviews.then(r => {\n      if (r == null || r === null) {\n        return null\n      }\n      if (r.length !== this.state.reviews.length) {\n        this.setState({reviews: r})\n      }\n    })\n  }\n  async upvoteReview(id) {\n    var res = await fetch('/review/'+id+'/upvote', {\n      method: 'post'\n    })\n    var s = await res.json()\n  }\n  //this actually creates the cells in the reviewTable, if changing the properties when moving to jigs then we need to remove / update properties here (and remove headers from render fuinction)\n  renderTableData() {\n    if (this.state.reviews == null) {\n      return null\n    }\n    return this.state.reviews.map((review, index) => {\n      console.log(review)\n      return (\n        <tr>\n          <td>{review.body}</td>\n          <td>{review.rating}</td>\n          <td>{review.user}</td>\n          <td><Button variant=\"primary\" size=\"sm\" onClick={() => this.upvoteReview(review.origin)}>Great Review!</Button></td>\n          <td text-center=\"true\">\n            <MoneyButton\n              to={review.user}\n              amount='1'\n              currency='USD'\n            />\n          </td>\n        </tr>\n      )\n    })\n  }\n  render() {\n      return (\n          <Jumbotron fluid>\n              <Table striped bordered hover>\n                  <thead>\n                      <tr>\n                          <th text-center=\"true\">Body</th>\n                          <th text-center=\"true\">Rating</th>\n                          <th text-center='true'>User</th>\n                          <th text-center=\"true\">Vote</th>\n                          <th text-center=\"true\">Tip</th>\n                      </tr>\n                  </thead>\n                  <tbody>\n                    {this.renderTableData()}\n                  </tbody>\n              </Table>\n          </Jumbotron>\n          );\n  }\n}\n\n","import React from 'react';\nimport ReviewTable from './ReviewTable.js';\nimport {GetMBUser, IsLoggedIn} from './MB';\nimport {Jumbotron} from 'react-bootstrap';\nimport './App.css';\nimport GoogleMap from 'google-map-react';\nimport {geolocated} from 'react-geolocated';\nimport Place from './Place';\n \nconst MY_API_KEY = process.env.REACT_APP_GOOGLE_API_KEY\nconst run = window.Jigs.RunInstance\n\nexport class Browse extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleMapClick = this.handleMapClick.bind(this)\n    this.state = {\n      userID: '',\n      showMap: true,\n      loggedIn: false,\n      places: []\n    }\n  }\n  componentDidMount() {\n    GetMBUser().then(r=>{\n      this.setState({userID: r.id})\n    })\n    IsLoggedIn().then(r=>{\n      this.setState({loggedIn: r})\n    })\n    this.getAllPlaces().then(r=>{\n      this.setState({places: r})\n    })\n  }\n  handleMapClick(event) {\n    console.log(this.state.places[event])\n  }\n  renderReviewTable() {\n    if (this.state.showMap) {\n      return null\n    }\n    return (\n      <ReviewTable\n        reviews={this.getAllPlaces()}\n      />\n    )\n  }\n  renderMap() {\n    var center ={lat: 35.7, lng: -78.7}\n    var zoom = 4\n    if (this.props.coords !== null) {\n      center = {lat: this.props.coords.latitude, lng: this.props.coords.longitude}\n      zoom = 14\n      console.log(this.props.coords.latitude)\n    }\n    if (!this.state.showMap) {\n      return null\n    }\n    var revs = this.state.places\n    var places = []\n    for (var i=0;i<revs.length;i++) {\n      console.log(revs[i].coords)\n      var c = revs[i].coords\n      places[i] = <Place lat={c.lat} lng={c.lng} name={revs[i].locationName} key={i}/>\n    }\n    return (\n      <div className=\"container text-center\" style={{ height: '50vh', width: '50%'}}>\n        <GoogleMap\n          bootstrapURLKeys={{key: MY_API_KEY}}\n          defaultCenter={center}\n          defaultZoom={zoom}\n          onChildClick={this.handleMapClick}\n          hoverDistance={40} >\n          {places}\n        </GoogleMap>\n      </div>\n    )\n  }\n  getAllPlaces() {\n    return loadPlaces().then(r => {\n      return r\n    })\n  }\n  render () {\n    return (\n    <Jumbotron>\n      <div>\n        <div>\n          {this.renderReviewTable()}\n          {this.renderMap()}\n        </div>\n      </div>\n    </Jumbotron>\n    );\n  }\n}\n\n\nasync function loadPlaces() {\n  return fetch('/locations').then(res=>res.json()).then(l => {\n    console.log(l)\n    return l\n  })\n}\n\nexport default geolocated({\n  positionOptions: {\n      enableHighAccuracy: false,\n    },\n  userDecisionTimeout: 5000,\n})(Browse);\n","import React from 'react';\nimport {GetMBUser} from './MB';\nimport {Jumbotron, Button, Modal} from 'react-bootstrap'\nimport GoogleMapLoader from 'react-google-maps-loader'\nimport GooglePlacesSuggest from 'react-google-places-suggest'\nimport ReviewTable from './ReviewTable.js';\n\n//const UnwriterAPIKey = process.env.REACT_APP_UNWRITERAPIKEY\nconst MY_API_KEY = process.env.REACT_APP_GOOGLE_API_KEY\n\n//const AllLocations = window.Jigs.AllLocations\n\n//const Run = window.Run\nconst run = window.Jigs.RunInstance\n\n\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSelectSuggest = this.handleSelectSuggest.bind(this)\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.handleClaimSubmit = this.handleClaimSubmit.bind(this)\n    this.transferLocation = this.transferLocation.bind(this)\n    this.state = {\n      search: '',\n      placeID: '',\n      reviewList: [],\n      placeDescription: '',\n      address: '',\n      moneyButtonID: '',\n      moneyButtonName: '',\n      locationSelected: false,\n      renderModal: false,\n    };\n  }\n  componentDidMount() {\n    GetMBUser().then(r=> {\n      this.setState({moneyButtonID: r.id, moneyButtonName: r.name})\n    })\n  }\n\n  handleInputChange(e) {\n    this.setState({search: e.target.value, address: e.target.value, placeDescription: e.target.value})\n  }\n\n  handleSelectSuggest(geocodedPrediction, originalPrediction) {\n    console.log(geocodedPrediction, originalPrediction) // eslint-disable-line\n    console.log(originalPrediction.description)\n    this.setState({search: '', address: geocodedPrediction.formatted_address, placeID: geocodedPrediction.place_id, placeDescription: originalPrediction.description, locationSelected: true})\n  }\n  \n  handleNoResult() {\n    console.log('No results for ', this.state.search)\n    this.setState({locationSelected: false})\n  }\n\n  handleStatusUpdate(status) {\n    console.log(status)\n  }\n  renderReviewTable() {\n    if (this.state.locationSelected) {\n      return <ReviewTable reviews={getReviews(this.state.placeID)}/>\n    }\n    return null\n  }\n  handleClaimSubmit() {\n    this.setState({renderModal: true})\n  }\n  renderClaimBusinessButton() {\n    if (this.state.locationSelected === false || this.state.moneyButtonID === '') {\n      return null\n    }\n    return (\n      <div className=\"container text-center\">\n        <Button onClick={this.handleClaimSubmit} type=\"submit\" variant=\"primary\" size=\"lg\">\n          Claim Location\n        </Button>\n      </div>\n    )\n  }\n  async transferLocation() {\n    if (this.state.placeID === '') {\n      console.error('No place selected')\n      return\n    }\n    fetch('/locations/'+this.state.placeID+'/transfer', {\n      headers: {'Content-Type': 'application/json'},\n      method: 'post',\n      body: JSON.stringify({\n        businessID: this.state.moneyButtonID\n      })\n    }).then(res => res.json()).then(rev =>  {\n      this.setState({renderSuccessModal: true})\n      console.log(rev)\n    })\n  }\n  renderClaimModal() {\n    if (!this.state.renderModal) {\n      return null\n    }\n    return (\n      <Modal.Dialog>\n        <Modal.Header closeButton>\n          <Modal.Title>This is your location?</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <p>Please be certain you are the business owner of this location. We will KYC you to ensure users are not squatting locations.</p>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button variant=\"secondary\">Close</Button>\n          <Button onClick={this.transferLocation} variant=\"primary\">Claim Location</Button>\n        </Modal.Footer>\n      </Modal.Dialog>\n    )\n  }\n  \n  render() {\n    return (\n      <Jumbotron>\n        <GoogleMapLoader\n          params={{\n            key: MY_API_KEY,\n            libraries: \"places,geocode\",\n          }}\n          render={googleMaps =>\n            googleMaps && (\n              <GooglePlacesSuggest\n                 googleMaps={googleMaps}\n                 autocompletionRequest={{\n                   input: this.state.search,\n                 }}\n                 onNoResult={this.handleNoResult}\n                 onSelectSuggest={this.handleSelectSuggest}\n                 onStatusUpdate={this.handleStatusUpdate}\n                 textNoResults='My custom no results text' // null or  if you want to disable the no results item\n                 customRender={prediction => (\n                   <div className=\"customWrapper\">\n                     {prediction\n                       ? prediction.description\n                       : \"My custom no results text\"}\n                   </div>\n                 )}\n               >\n               <input\n                 className=\"form-control\"\n                 type='text'\n                 value={this.state.placeDescription}\n                 placeholder='Search a location'\n                 onChange={this.handleInputChange}\n               />\n               </GooglePlacesSuggest>\n             )\n           }\n         />\n         {this.renderClaimBusinessButton()}\n         {this.renderClaimModal()}\n         {this.renderReviewTable()}\n      </Jumbotron>\n    );\n  }\n}\n\n\n//this function needs to be updated to account for jigs\nfunction getReviews(placeID) {\n  return fetch('/locations/'+placeID).then(res=> {\n    if (res.status === 404) {\n      throw 'Location not found'\n    }\n    return res.json()\n  }).then(r => {\n    return r.reviews\n  })\n}\n\nasync function loadJigs(placeID) {\n  run.activate()\n  var locs = run.owner.jigs.find(x => x.constructor.name === 'AllLocations')\n  if (locs == null) {\n    return null\n  }\n  var loc = locs.get(placeID)\n  if (loc == null) {\n    console.log(\"No location found\")\n    return null\n  }\n  console.log('location found: ' + loc)\n  var jig = await run.load(loc)\n  console.log(jig)\n  await jig.sync()\n  var revs = Object.entries(jig.reviews)\n  console.log(revs)\n  var reviewList = []\n  for (var [key, value] of revs) {\n    console.log('User: ' + key + ' review: ' + value.location)\n    var rev = await run.load(value.location)\n    console.log('Loading review...')\n    console.log(rev)\n    reviewList.push({locationName: jig.name, rating: rev.rating, reviewBody: rev.body, mbName: rev.user})\n  }\n  console.log(reviewList)\n  return reviewList\n}\n","import React from 'react';\nimport {GetMBUser} from './MB';\n//import MoneyButton from '@moneybutton/react-money-button'\nimport {Button, Modal} from 'react-bootstrap'\nimport GoogleMap from 'google-map-react'\nimport Place from './Place';\nimport GoogleMapLoader from 'react-google-maps-loader'\nimport GooglePlacesSuggest from 'react-google-places-suggest'\nconst Review = window.Jigs.Review\nconst Location = window.Jigs.Location\nconst AllLocations = window.Jigs.AllLocations\n//const UserDB = window.Jigs.UserDB\n\n//const Run = window.Run\nconst run = window.Jigs.RunInstance\n\n\n\n\nconst MY_API_KEY = process.env.REACT_APP_GOOGLE_API_KEY\n\n\n\nexport default class Redeem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleRedeemSubmit = this.handleRedeemSubmit.bind(this)\n    this.handleSelectSuggest = this.handleSelectSuggest.bind(this)\n    this.handleNoResult = this.handleNoResult.bind(this)\n    this.handleStatusUpdatStatusUpdatee = this.handleStatusUpdate.bind(this)\n    this.handleLocationChange = this.handleLocationChange.bind(this)\n    this.handleLocationTypeChange = this.handleLocationTypeChange.bind(this)\n    this.handleReviewBodyChange = this.handleReviewBodyChange.bind(this)\n    this.handleReviewRatingChange = this.handleReviewRatingChange.bind(this)\n    this.handleRedeemCodeChange = this.handleRedeemCodeChange.bind(this)\n    this.handleBusinessIDChange = this.handleBusinessIDChange.bind(this)\n    this.handleFormChange = this.handleFormChange.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    \n\n    this.state = {\n      badInput: false,\n      type: '',\n      name: '',\n      body: '',\n      search: '',\n      placeID: '',\n      placeDescription: '',\n      address: '',\n      rating: '',\n      businessID: '',\n      redeemCode: '',\n      moneyButtonID: '',\n      moneyButtonName: '',\n      reviewTx: '',\n      coords: {lat: 59.93, lng: 30.33},\n      renderMap: false,\n      submitted: false,\n      renderMB: false,\n      validForm: false,\n      renderReviewForm: false,\n      renderRedeemForm: true,\n      invalidRedemptionCode: false,\n      renderSuccessModal: false,\n    };\n  }\n\n  closeModal() {\n    this.setState({renderSuccessModal: false})\n  }\n\n  renderSubmissionModal() {\n    if (this.state.renderSuccessModal === false) {\n      return null\n    }\n    return (\n      <Modal.Dialog>\n        <Modal.Header closeButton>\n          <Modal.Title>Successfully created a review!</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <p>Congratulations! You have earned 1 reputation point. Thanks for reviewing {this.state.placeDescription}</p>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button onClick={this.closeModal} variant=\"secondary\">Close</Button>\n          <Button variant=\"primary\">View Review</Button>\n        </Modal.Footer>\n      </Modal.Dialog>\n    )\n  }\n\n  async handleSubmit(event) { \n    event.preventDefault();\n    fetch('/review/'+this.state.placeID, {\n      headers: {'Content-Type': 'application/json'},\n      method: 'post',\n      body: JSON.stringify({\n        locationName: this.state.placeDescription,\n        coords: this.state.coords,\n        reviewBody: this.state.body,\n        rating: this.state.rating,\n        userID: this.state.moneyButtonID\n      })\n    }).then(res => res.json()).then(rev =>  {\n      this.setState({renderSuccessModal: true})\n      console.log(rev)\n    })\n  }\n\n  async handleRedeemSubmit(event) { \n    event.preventDefault();\n    fetch('/truereview/'+this.state.businessID+'/redeem', {\n      headers: {'Content-Type': 'application/json'},\n      method: 'post',\n      body: JSON.stringify({\n        code: this.state.redeemCode,\n        userID: this.state.moneyButtonID,\n        dryRun: true\n      })\n    }).then(res => {\n      if (res.status !== 200) {\n        throw 'Invalid redemption code'\n      }\n      return res.json()\n    }).then(red =>  {\n      if (!red.redeemed) {\n        throw 'Error redeeming code'\n      }\n      console.log(red)\n      this.setState({invalidRedemptionCode: false, renderReviewForm: true, renderRedeemForm: false, placeID: red.placeID})\n    }).catch(e => {\n      console.error(e)\n      this.setState({invalidRedemptionCode: true})\n    })\n  }\n\n  renderRedeemErrorMessage() {\n    if (!this.state.invalidRedemptionCode) {\n      return null\n    }\n    return (\n      <div>\n        <h1>Invalid Redemption Code</h1>\n      </div>\n    )\n  }\n\n  renderRedeemSubmitButton(){\n    console.log(this.state.moneyButtonID)\n    if (this.state.moneyButtonID === '' || this.state.badInput) {\n      return (\n        <Button variant=\"primary\" type=\"submit\" disabled>Redeem Code</Button>\n      )\n    }\n    return (\n      <Button variant=\"primary\" type=\"submit\">Redeem Code</Button>\n    )\n  }\n  renderSubmitButton(){\n    console.log(this.state.moneyButtonID)\n    if (this.state.moneyButtonID === '' || this.state.badInput) {\n      return (\n        <Button variant=\"primary\" type=\"submit\" disabled>Submit Review</Button>\n      )\n    }\n    return (\n      <Button variant=\"primary\" type=\"submit\">Submit Review</Button>\n    )\n  }\n\n  componentDidMount() {\n    GetMBUser().then(r=> {\n      this.setState({moneyButtonID: r.id, moneyButtonName: r.name})\n    })\n  }\n\n  //handle changes to the form entered by the user\n  handleLocationChange(e) {\n      this.setState({search: e.target.value, address: e.target.value, placeDescription: e.target.value})\n  }\n\n  handleLocationTypeChange(event) {\n    this.setState({type: event.target.value})\n  }\n \n  handleReviewBodyChange(event) {\n    this.setState({body: event.target.value});\n  }\n\n  handleRedeemCodeChange(event) {\n    this.setState({redeemCode: event.target.value});\n  }\n\n  handleBusinessIDChange(event) {\n    this.setState({businessID: event.target.value});\n  }\n\n  handleReviewRatingChange(event) {\n    event.preventDefault()\n    console.log(event.target.value)\n    this.setState({rating: event.target.value})\n    console.log(this.state)\n    console.log(this.state.rating === '')\n\n  }\n\n  handleFormChange(event) {\n    if (this.state.placeID === '' || this.state.body === '', this.state.rating === '') {\n      this.setState({renderMB: false, validForm: false})\n    }\n    else {\n      this.setState({renderMB: true, validForm: true})\n    }\n  }\n\n  handleSelectSuggest(geocodedPrediction, originalPrediction) {\n    this.setState({badInput: false})\n    this.setState({renderMap: true})\n    this.setState({\n      coords: {\n        lat: geocodedPrediction.geometry.location.lat(),\n        lng: geocodedPrediction.geometry.location.lng(),\n      }\n    })\n    console.log(originalPrediction.description)\n    this.setState({search: '', address: geocodedPrediction.formatted_address, placeID: geocodedPrediction.place_id, placeDescription: originalPrediction.description})\n  }\n  \n  handleNoResult() {\n    this.setState({badInput: true})\n    console.log('No results for ', this.state.search)\n  }\n  renderPlaceMap() {\n\n  if (!this.state.renderMap) {\n      return null\n    }\n    var zoom = 14\n    return (\n      <div className=\"container text-center\" style={{ height: '50vh', width: '50%' , justifyContent: 'center', alignItems: 'center'}}>\n        <GoogleMap\n          bootstrapURLKeys={{key: MY_API_KEY}}\n          center={this.state.coords}\n          defaultZoom={zoom} >\n          <Place lat={this.state.coords.lat} lng={this.state.coords.lng} name={this.state.placeDescription}/>\n        </GoogleMap>\n      </div>\n    )\n  }\n\n  renderReviewForm() {\n    if (this.state.renderSuccessModal || !this.state.renderReviewForm) {\n      return null\n    }\n    return (\n      <form onSubmit={this.handleSubmit} onChange={this.handleFormChange}>\n        <div className=\"form-group\" id=\"reviewFormBody\">\n          <label>Review Body</label>\n          <textarea className=\"form-control\" rows=\"3\" onChange={this.handleReviewBodyChange} required/>\n        </div>\n        <div className=\"form-group\" id=\"reviewFormRating\">\n          <label>Rating</label>\n          <input className=\"form-control\" type=\"number\" min=\"0\" max=\"10\" step=\".1\" onInput={this.handleReviewRatingChange}  required/>\n        </div>\n        {this.renderSubmitButton()}\n      </form>\n    )\n  }\n\n  renderRedeemForm() {\n    if (!this.state.renderRedeemForm) {\n      return null\n    }\n    return (\n      <form onSubmit={this.handleRedeemSubmit}>\n        <div className=\"form-group\" id=\"redeemFormBusinessID\">\n          <label>Business Identity Code</label>\n          <input className=\"form-control\" type=\"text\" onChange={this.handleBusinessIDChange} required/>\n        </div>\n        <div className=\"form-group\" id=\"redeemFormCode\">\n          <label>Redemption Code</label>\n          <input className=\"form-control\" type=\"text\" onChange={this.handleRedeemCodeChange} required/>\n        </div>\n        {this.renderRedeemSubmitButton()}\n        {this.renderRedeemErrorMessage()}\n      </form>\n    )\n  }\n\n  handleStatusUpdate(status) {\n    console.log(status)\n  }\n  render() {\n      return (\n        <div>\n          <div>\n            {this.renderReviewForm()}\n            {this.renderSubmissionModal()}\n            {this.renderRedeemForm()}\n          </div>\n          {this.renderPlaceMap()}\n        </div>\n      );\n  }\n}\n\n\n","import React, {Component} from 'react';\nimport {GetMBUser} from './MB'\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: {},\n      userReviews: [],\n      getUserDone: false,\n      businessLocations: []\n    }\n  }\n  async getUserInformation(id) {\n    var res = await fetch('/users/'+id)\n    if (res.status === 404) {\n      return\n    }\n    console.log(res.status)\n    var user = await res.json()\n    res = await fetch('/review/user/' + id)\n    var reviews = await res.json()\n    return {user: user, reviews: reviews}\n  }\n  componentDidMount() {\n    GetMBUser().then(r=> {\n      this.getUserInformation(r.id).then(r => {\n        console.log(r)\n        this.setState({user: r.user, getUserDone: true, userReviews: r.reviews, businessLocations: r.user.locations})\n      })\n    })\n  }\n  async loadBusinessLocations() {\n  }\n  renderSpinner() {\n    if (this.state.getUserDone) {\n      return null\n    }\n    return (\n      <div className=\"container text-center\">\n        <p>Loading User Information...</p>\n        <div className=\"spinner-grow\"/>\n      </div>\n    )\n  }\n  renderBusinessAccount() {\n    console.log('here')\n    if (Object.entries(this.state.user).length === 0) {\n      return null\n    }\n    if (!this.state.user.businessAccount) {\n      return null\n    }\n\n    return this.state.businessLocations.map((location, index) => {\n      console.log(location)\n      return (\n        <div className=\"container text-center\">\n          <div class=\"card\" styles=\"width: 18rem;\">\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{location.name}</h5>\n            </div>\n          </div>\n        </div>\n      )})\n  }\n  renderUserReviews() {\n    if (Object.entries(this.state.user).length === 0) {\n      return null\n    }\n    if (this.state.userReviews.length === 0) {\n      return null\n    }\n    console.log(this.state.userReviews)\n    return this.state.userReviews.reviews.map((review, index) => {\n      return (\n        <div class=\"card\" styles=\"width: 18rem;\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{review.locationName}</h5>\n            <h6 class=\"card-subtitle mb-2 text-right\">Rating: {review.rating}</h6>\n            <h6 class=\"card-subtitle mb-2 text-right\">Score: {review.points}</h6>\n            <p class=\"card-text\">{review.body}</p>\n          </div>\n        </div>\n      )\n    })\n  }\n  renderUserInfo() {\n    if (Object.entries(this.state.user).length === 0) {\n      return null\n    }\n    console.log(this.state.user.reviews)\n    return (\n      <div>\n        <h3>Name: {this.state.user.profile.name}</h3>\n        <h3>Paymail: {this.state.user.profile.primaryPaymail}</h3>\n        <h3>Reputation: {this.state.user.tokens}</h3>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"container text-center\">\n        <div>\n          <h1>My Profile</h1>\n          <hr/>\n          {this.renderUserInfo()}\n          {this.renderSpinner()}\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <h3>My Reviews</h3>\n            {this.renderUserReviews()}\n          </div>\n          <div className=\"col\">\n            <h3>My Rewards</h3>\n          </div>\n        </div>\n        <div>\n          <h1>My Business Details</h1>\n          {this.renderBusinessAccount()}\n        </div>\n      </div>\n    )\n  }\n}\n","import React, {Component} from 'react';\nimport NavBar from './core/NavBar';\nimport Home from './Home.js';\nimport Submit from './Submit.js';\nimport Browse from './Browse.js';\nimport Search from './Search.js';\nimport Redeem from './Redeem.js';\nimport Profile from './Profile.js';\nimport './App.css';\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.onUserClick = this.onUserClick.bind(this)\n    this.state = {\n      showPage: \"home\",\n      navLocations: [\n        {title: \"Home\", navLocation: \"home\"},\n        {title: \"Submit\", navLocation: \"submit\"},\n        {title: \"Browse\", navLocation: \"browse\"},\n        {title: \"Search\", navLocation: \"search\"},\n        {title: \"Redeem\", navLocation: \"redeem\"},\n      ]\n\n    };\n\n    this.navigate = this.navigate.bind(this);\n  }\n\n  navigate(newPage) {\n    this.setState({showPage: newPage});\n  }\n  onUserClick() {\n    console.log('parent')\n    this.setState({showPage: 'profile'})\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar onUserClick={this.onUserClick} navFunction = {this.navigate} navLocations = {this.state.navLocations} />\n        {this.state.showPage === \"home\" ? <Home /> : null}\n        {this.state.showPage === \"submit\" ? <Submit /> : null}\n        {this.state.showPage === \"browse\" ? <Browse /> : null}\n        {this.state.showPage === \"search\" ? <Search /> : null}\n        {this.state.showPage === \"redeem\" ? <Redeem /> : null}\n        {this.state.showPage === \"profile\" ? <Profile /> : null}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {MoneyButtonClient} from '@moneybutton/api-client'\nimport MoneyButton from '@moneybutton/react-money-button'\n//import { PaymailClient } from '@moneybutton/paymail-client'\nconst MB_OAUTH_ID = process.env.REACT_APP_MBOAUTHID\n\nconst UserDB = window.Jigs.UserDB\n//const Run = window.Run\nconst run = window.Jigs.RunInstance\n\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props)\n    this.onPaymentSuccessUser = this.onPaymentSuccessUser.bind(this)\n    this.onPaymentSuccessBusiness = this.onPaymentSuccessBusiness.bind(this)\n    this.state = {\n      renderUserRegistration: false,\n      redirect: false,\n      user: {},\n    }\n  }\n\n  componentDidMount() {\n    console.log(\"Login component did mount called\");\n    handleAuth().then(u => {\n      console.log(u)\n      this.setState({user: u})\n      //this.setState({redirect: true});\n      //here u has the user's MB information\n      //this is where we need to create UserDB objects and save pubKeys\n      this.getUser(u)\n    })\n\n  }\n  \n  renderRedirect() {\n    if (!this.state.redirect) {\n      return null\n    }\n    console.log(\"Login redirect called\");\n    return (<Redirect to=\"/\"/>)\n  }\n  onPaymentSuccessUser(payment) {\n    console.log(\"Successfully paid\")\n    this.createUser(false).then(r=>{\n      this.setState({redirect: true})\n    })\n  }\n  onPaymentSuccessBusiness(payment) {\n    console.log(\"Successfully paid\")\n    this.createUser(true).then(r=>{\n      this.setState({redirect: true})\n    })\n  }\n\n  renderUserRegistration() {\n    if (!this.state.renderUserRegistration) {\n      return null\n    }\n    return (\n      <div className=\"container text-center\">\n        <h1>Welcome to TrueReviews {this.state.user.profile.name}!</h1>\n        <h2>Please select the type of account you'd like to register:</h2>\n        <MoneyButton\n          to='truereviews@moneybutton.com'\n          amount='0.01'\n          currency='USD'\n          label='User'\n          onPayment={this.onPaymentSuccessUser}\n        />\n        <MoneyButton\n          to='truereviews@moneybutton.com'\n          amount='0.02'\n          currency='USD'\n          label='Business'\n          onPayment={this.onPaymentSuccessBusiness}\n        />\n      </div>\n    )\n  }\n  async getUser(u) {\n    var res = await fetch('/users/'+u.id)\n    if (res.status === 200) {\n      this.setState({redirect: true})\n      return\n    }\n    if (res.status === 404) {\n      this.setState({renderUserRegistration: true})\n    }\n  }\n  async createUser(businessAccount) {\n    fetch('/users/'+this.state.user.id, {\n      headers: {'Content-Type': 'application/json'},\n      method: 'post',\n      body: JSON.stringify({\n        profile: this.state.user.profile,\n        businessAccount: businessAccount\n      })\n    }).then(res => res.json()).then(rev => {\n      console.log(rev)\n      this.setState({redirect: true})\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderUserRegistration()}\n        {this.renderRedirect()}\n      </div>\n    )\n  }\n}\n\nasync function handleAuth() {\n  var mbclient = new MoneyButtonClient(MB_OAUTH_ID)\n  await mbclient.handleAuthorizationResponse()\n  var identity = await mbclient.getIdentity()\n  var profile = await mbclient.getUserProfile(identity.id)\n  return {id: identity.id, profile: profile}\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'bootstrap/dist/css/bootstrap.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Login from './Login';\nimport { BrowserRouter as Router, Route} from \"react-router-dom\";\nimport * as serviceWorker from './serviceWorker';\nconsole.log(process.env)\n\nReactDOM.render(\n  <Router>\n    <div>\n      <Route path=\"/\" exact component={App} />\n      <Route path=\"/login/\" component={Login} />\n    </div>\n  </Router>\n  , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}